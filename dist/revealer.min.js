/*! revealer v1.0.0 | (c) 2015 Pete Redmond |  */
!function(e,t){"use strict";if("function"==typeof define&&define.amd)define(["angular"],t);else{if("undefined"==typeof module||"object"!=typeof module.exports)return t(e.angular);module.exports=t(require("angular"))}}(this,function(e){"use strict";function t(t,l){function c(c,f,m){function v(e){e.preventDefault();var t,r="mousemove"===e.type?e:e.changedTouches[0],a=n(r,w);a.x+=y,a.x<0||a.x>w.width||(t=a.x/w.width*100,o(g,_,t))}function d(e){if(e.preventDefault(),s(f,l,c.scrollOffset)){var t=a(f[0].parentNode).top,r=window.innerHeight-c.scrollOffset,n=(r-t)/r*100;n>0&&100>n&&o(g,_,n)}}function p(o){var r=o.type===u[0].release?0:1,n=u[r];c.onComplete&&c.onComplete(),g.removeClass(b),t.off(n.move,C),t.off(n.release,p),c.pageScroll&&e.element(l).off("scroll",I)}if(!c.topImage||!c.bottomImage)throw Error("please provide a valid path for the top and bottom image attributes on the revealer directive");c.startPosition=c.startPosition&&c.startPosition<100?c.startPosition:50,c.scroll=c.scroll===!0?!0:!1,c.scrollOffset=c.scrollOffset||0;var g,_,h,b,w,x,y=0,C=i(v,40),I=i(d,20);t.ready(function(){g=r(f,".revealer__handle"),_=r(f,".revealer__top-image"),h=r(f,".revealer__container"),b="revealer__handle--drag",c.scroll&&e.element(l).on("scroll",I),c.scroll?o(g,_,0):o(g,_,startPosition),e.forEach(u,function(e){g.on(e.action,function(o){var r;g.addClass(b),w=a(h),x=a(g),r=n(o,x).x,y=r>x.width/2?-(r-x.width/2):x.width/2-r,t.on(e.move,C),t.on(e.release,p)})})})}return{restrcit:"E",template:['<div class="revealer__container">','<img class="revealer__image" ng-src="{{bottomImage}}">','<span class="revealer__label revealer__label--right">{{ bottomLabel}}</span>','<div class="revealer__top-image">','<img class="revealer__image" ng-src="{{topImage}}">','<span class="revealer__label revealer__label--left">{{topLabel}}</span>',"</div>",'<span class="revealer__handle"></span>',"</div>"].join(""),scope:{bottomLabel:"@",topLabel:"@",bottomImage:"@",topImage:"@",startPosition:"=?",onComplete:"&",scroll:"=?",scrollOffset:"=?"},link:c}}function o(e,t,o){e.css({left:l(o)}),t.css({width:l(o)})}function r(t,o){return e.element(t[0].querySelector(o))}function n(e,t){return{x:e.clientX-t.left}}function a(e){return e=e[0]||e,e.getBoundingClientRect()}function l(e){return e+"%"}function i(e,t){function o(){n=!1}var r=this,n=!1;return function(){n||(e.apply(r,arguments),n=!0,setTimeout(o,t))}}function s(e,t,o){o=o||0;var r=a(e[0].parentNode||e);return!!r&&r.bottom>=0&&r.top<=t.innerHeight-o}var c="revealer";e.module(c,[]).directive("revealer",t);var u=[{action:"mousedown",move:"mousemove",release:"mouseup"},{action:"touchstart",move:"touchmove",release:"touchend"}];return t.$inject=["$document","$window"],c});