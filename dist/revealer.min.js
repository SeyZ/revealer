/*! revealer v0.1.3 | (c) 2015 Pete Redmond |  */
!function(e,t){"use strict";if("function"==typeof define&&define.amd)define(["angular"],t);else{if("undefined"==typeof module||"object"!=typeof module.exports)return t(e.angular);module.exports=t(require("angular"))}}(this,function(e){"use strict";function t(t){function i(i,l,m){if(!i.topimage&&!i.topImage||!i.bottomimage&&!i.bottomImage)throw Error("please provide a valid path for the top and bottom image attributes on the revealer directive");var c=!isNaN(parseInt(i.startPosition,10))&&i.startPosition<100,u=i.startPosition=c?parseInt(i.startPosition,10):50;t.ready(function(){function m(e){e.preventDefault();var t,a="mousemove"===e.type?e:e.changedTouches[0],n=r(a,g);n.x+=b,n.x<0||n.x>g.width||(t=n.x/g.width*100,o(v,p,t))}function c(e){var o=e.type===s[0].release?0:1,a=s[o];i.onComplete&&i.onComplete(),v.removeClass(f),t.off(a.move,m),t.off(a.release,c)}var v=a(l,".revealer__handle"),p=a(l,".revealer__top-image"),d=a(l,".revealer__container"),f="revealer__handle--drag";o(v,p,u);var g,_,b=0;e.forEach(s,function(e){v.on(e.action,function(o){var a;v.addClass(f),g=n(d),_=n(v),a=r(o,_).x,b=a>_.width/2?-(a-_.width/2):_.width/2-a,t.on(e.move,m),t.on(e.release,c)})})})}return{restrcit:"E",template:['<div class="revealer__container">','<img class="revealer__image" ng-src="{{bottomimage || bottomImage}}">','<span class="revealer__label revealer__label--right">{{bottomlabel || bottomLabel}}</span>','<div class="revealer__top-image">','<img class="revealer__image" ng-src="{{topimage || topImage}}">','<span class="revealer__label revealer__label--left">{{toplabel || topLabel}}</span>',"</div>",'<span class="revealer__handle"></span>',"</div>"].join(""),scope:{bottomlabel:"@",bottomLabel:"@",toplabel:"@",topLabel:"@",bottomimage:"@",bottomImage:"@",topimage:"@",topImage:"@",startPosition:"@",onComplete:"&"},link:i}}function o(e,t,o){e.css({left:i(o)}),t.css({width:i(o)})}function a(t,o){return e.element(t[0].querySelector(o))}function r(e,t){return{x:e.clientX-t.left}}function n(e){return e[0].getBoundingClientRect()}function i(e){return e+"%"}var l="revealer";e.module(l,[]).directive("revealer",t);var s=[{action:"mousedown",move:"mousemove",release:"mouseup"},{action:"touchstart",move:"touchmove",release:"touchend"}];return t.$inject=["$document"],l});